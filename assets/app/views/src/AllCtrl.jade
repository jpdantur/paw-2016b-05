extends layouts/layout

block content
	include mixins/product
	+navbar(true)
	div.container
		div.row#search-container
			div.col-sm-12#search-title
				h1 #{messageSource.getMessage('search.searchResults', [], locale)}&nbsp;
					i #{query}
			div.col-sm-12
				include partials/modifiers
			div.col-sm-2(style="padding:5px")
				include partials/filters
			div.col-sm-10
				div.row#product-grid
					h3.text-warning(ng-if="!all.itemResult.results.length") #{messageSource.getMessage('search.none',[],locale)}
					div.col-sm-3.store-item(ng-repeat="item in all.itemResult.results")
						div.product-container
							a(href="#!/store/items/{{item.id}}")
								div.image-container
									img(ng-if="!item.images.length", ng-src="http://placehold.it/200?text=Sin+Imagen", style="width:100%;height:auto")
									img(ng-if="item.images.length", ng-src="data:image/png;base64,{{item.image[0].content}}", style="width:100%;height:auto")
							a.product-title(href="#!/store/items/{{item.id}}", title="{{item.name}}")
								b {{item.name}}
							p.product-description(title="{{item.description}}") {{item.description}}
							div(star-rating, ng-model="item.rating", readonly="true", ng-class='{worst: item.rating <= 1, bad: 1 < item.rating && item.rating <= 2, ok: 2 < item.rating && item.rating <= 3, good: 3 < item.rating && item.rating <= 4, great: 4 < item.rating && item.rating <= 5}')
							//-div.rating.static(style="font-size:13px;", data-rate-value=item.rating)
							span.product-price $ {{item.price.toFixed(2)}}
				div.row
					div.col-sm-12
						ul.pager#filter-page(data-page="#{pageNumber}", data-last-page="#{lastPage}")
							li.previous(class="#{pageNumber==0?'disabled':''}")
									a.filter-page-action(href="#")
										span &larr;
										span #{messageSource.getMessage('search.filters.pagination.pagers.first', [], locale)}
							li.pre(class="#{pageNumber==0?'disabled':''}")
								a.filter-page-action(href="#") #{messageSource.getMessage('search.filters.pagination.pagers.previous', [], locale)}
							li.ne(class="#{pageNumber==lastPage?'disabled':''}")
								a.filter-page-action(href="#") #{messageSource.getMessage('search.filters.pagination.pagers.next', [], locale)}
							li.next(class="#{pageNumber==lastPage?'disabled':''}")
									a.filter-page-action(href="#")
										span #{messageSource.getMessage('search.filters.pagination.pagers.last', [], locale)}
										span &rarr;
								