 <div ng-controller="ScoreCtrl as score"> <form role="form" class="form-horizontal i"> <legend>{{ 'profile.modal.scores.scoresFrom' | translate }}&nbsp;<span ng-if="score.role === 'buyer'" class="what">{{ 'profile.modal.scores.seller' | translate }}</span><span ng-if="score.role === 'seller'" class="what">{{ 'profile.modal.scores.buyer' | translate }}</span></legend> <div class="form-group"> <label for="score" class="col-sm-2 control-label">{{ 'profile.modal.scores.score' | translate }}</label> <div class="col-sm-10"> <div ng-if="score.role === 'buyer' &amp;&amp; score.tx.sellerReview" star-rating="star-rating" ng-model="score.tx.sellerReview.rating" on-rating-select="score.rateTop()" readonly ng-class="{worst: score.tx.sellerReview.rating &lt;= 1, bad: 1 &lt; score.tx.sellerReview.rating &amp;&amp; score.tx.sellerReview.rating &lt;= 2, ok: 2 &lt; score.tx.sellerReview.rating &amp;&amp; score.tx.sellerReview.rating &lt;= 3, good: 3 &lt; score.tx.sellerReview.rating &amp;&amp; score.tx.sellerReview.rating &lt;= 4, great: 4 &lt; score.tx.sellerReview.rating &amp;&amp; score.tx.sellerReview.rating &lt;= 5}"></div> <div ng-if="score.role === 'seller' &amp;&amp; score.tx.buyerReview" star-rating="star-rating" ng-model="score.tx.buyerReview.rating" on-rating-select="score.rateTop()" readonly ng-class="{worst: score.tx.buyerReview.rating &lt;= 1, bad: 1 &lt; score.tx.buyerReview.rating &amp;&amp; score.tx.buyerReview.rating &lt;= 2, ok: 2 &lt; score.tx.buyerReview.rating &amp;&amp; score.tx.buyerReview.rating &lt;= 3, good: 3 &lt; score.tx.buyerReview.rating &amp;&amp; score.tx.buyerReview.rating &lt;= 4, great: 4 &lt; score.tx.buyerReview.rating &amp;&amp; score.tx.buyerReview.rating &lt;= 5}"></div> <p ng-if="score.role === 'buyer' ? !score.tx.sellerReview : !score.tx.buyerReview" class="help-block r1">{{ 'profile.modal.scores.stillNoScore' | translate }}</p> </div> </div> <div class="form-group"> <label for="content" class="col-sm-2 control-label">{{ 'item.comment' | translate }}</label> <div class="col-sm-10"> <p class="form-control-static r1 l">{{score.role === 'buyer' ? score.tx.sellerReview.comment : score.tx.buyerReview.comment}}</p> </div> </div> </form> <form role="form" ng-submit="score.rateSale(reviewForm.$valid)" name="reviewForm" novalidate class="form-horizontal j"> <legend>{{ 'profile.modal.scores.yourScore' | translate }}</legend> <div ng-if="score.role === 'seller' ? !score.tx.sellerReview.id : !score.tx.buyerReview.id" class="form-group"> <div class="col-sm-10 col-sm-offset-2"> <p class="help-block r2">{{ 'profile.modal.scores.stillNoScore' | translate }}</p> </div> </div> <div class="form-group"> <label for="score" class="col-sm-2 control-label">{{ 'profile.modal.scores.score' | translate }}</label> <div class="col-sm-10"> <div ng-if="score.role === 'seller' &amp;&amp; score.tx" star-rating="star-rating" ng-model="score.tx.sellerReview.rating" on-rating-select="score.rateTop()" readonly ng-class="{worst: score.tx.sellerReview.rating &lt;= 1, bad: 1 &lt; score.tx.sellerReview.rating &amp;&amp; score.tx.sellerReview.rating &lt;= 2, ok: 2 &lt; score.tx.sellerReview.rating &amp;&amp; score.tx.sellerReview.rating &lt;= 3, good: 3 &lt; score.tx.sellerReview.rating &amp;&amp; score.tx.sellerReview.rating &lt;= 4, great: 4 &lt; score.tx.sellerReview.rating &amp;&amp; score.tx.sellerReview.rating &lt;= 5}"></div> <div ng-if="score.role === 'buyer' &amp;&amp; score.tx" star-rating="star-rating" ng-model="score.tx.buyerReview.rating" on-rating-select="score.rateTop()" readonly ng-class="{worst: score.tx.buyerReview.rating &lt;= 1, bad: 1 &lt; score.tx.buyerReview.rating &amp;&amp; score.tx.buyerReview.rating &lt;= 2, ok: 2 &lt; score.tx.buyerReview.rating &amp;&amp; score.tx.buyerReview.rating &lt;= 3, good: 3 &lt; score.tx.buyerReview.rating &amp;&amp; score.tx.buyerReview.rating &lt;= 4, great: 4 &lt; score.tx.buyerReview.rating &amp;&amp; score.tx.buyerReview.rating &lt;= 5}"></div> </div> </div> <div ng-class="{ 'has-error': reviewForm.comment.$invalid &amp;&amp; !reviewForm.comment.$pristine }" class="form-group"> <label for="content" class="col-sm-2 control-label">{{ 'item.comment' | translate }}</label> <div class="col-sm-10"> <p ng-if="score.role === 'seller' ? score.tx.sellerReview.id : score.tx.buyerReview.id" class="form-control-static r2 l">{{score.role === 'seller' ? score.tx.sellerReview.comment : score.tx.buyerReview.comment}}</p> <textarea ng-if="score.role === 'seller' ? !score.tx.sellerReview.id : !score.tx.buyerReview.id" required name="comment" ng-model="score.comment" ng-minlength="4" class="form-control"></textarea> <p ng-show="reviewForm.comment.$error.required" class="help-block">Comment is required</p> <p ng-show="reviewForm.comment.$error.minlength" class="help-block">Comment is too short</p> </div> </div> <div ng-if="score.role === 'seller' ? !score.tx.sellerReview.id : !score.tx.buyerReview.id" class="form-group"> <div class="col-sm-10 col-sm-offset-2"> <button type="submit" ng-disabled="!reviewForm.$valid" class="btn-default btn rate-button">{{ 'profile.modal.scores.toScore' | translate }}</button> </div> </div> </form> </div>